<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">

    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../node_modules/handlebars/dist/handlebars.js"></script>
</head>
<body>

<ul id="testData">
</ul>

<script id="template" type="text/x-handlebars-template">
    {{#each members}}
    {{#fn_ifTest age}}
    <li>
        {{@index}} :
        {{name}}
        {{age}}
    </li>
    {{/fn_ifTest}}
    {{/each}}
</script>

<script type="text/javascript">
    Handlebars.registerHelper("fn_ifTest", function(age, option) {

        console.log('this =>', this);
        console.log('age => ', age);
        console.log('this.age => ', this.age);
        console.log('option => ', option);
        console.log('option.fn() => ', option.fn());
        console.log('option.fn(this) => ', option.fn(this));  // this 인자의 차이는 출력값 포함, 미포함

        var result = "";

        if(age == 20) { // age가인 맴버만 출력
            result += option.fn(this);
        }
        return result;
    });

    var testData = {
        members : [
            { name : '이소룡', regdate: 1496893345000, age:50},
            { name : '김양용', regdate: 1496893341000, age:20},
            { name : '조미미', regdate: 1496893330000, age:30},
            { name : '김조조', regdate: 1496893310000, age:20},
            { name : '김나라', regdate: 1496893380000, age:60}
        ]
    };

    var template = Handlebars.compile($('#template').html());
    var html = template(testData);
    $("#testData").append(html);

</script>
</body>
</html>